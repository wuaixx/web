# 1 需求

![image-20230923190439301](https://raw.githubusercontent.com/wuaixx/photo/master/img/image-20230923190439301.png)

**在线考试管理系统，模块如下：**

**登录模块**

**权限模块**

**学生管理模块**

**科目管理模块**

# 2 技术选型

 

**前端：html+bootstrap模板，jQuery，ajax**

**后端：java，springboot，mybatis，mysql**

 

# 3 环境准备

 

**jdk1.8****环境变量**

**mysql8**

**maven****环境变量**

**idea****社区版**



 

# 4 idea社区版创建springboot工程

 

## 4.1 设置自定义全局maven

**1**、选择关闭当前项目**

![image-20230923190459369](https://raw.githubusercontent.com/wuaixx/photo/master/img/image-20230923190459369.png)

 

 

**2**、选择Customize，点击Configure**

![image-20230923190513753](https://raw.githubusercontent.com/wuaixx/photo/master/img/image-20230923190513753.png)

 

 

查询maven，在左侧菜单点击选择Maven，填写外部maven的路径，填写自己的settings.xml文件，会自动填写本地仓库的路径，把2个Override的复选框勾选上**

![image-20230923190523846](https://raw.githubusercontent.com/wuaixx/photo/master/img/image-20230923190523846.png)

 

**4**、点击Apply，点击OK**

 

## 4.2 创建maven工程

 

![image-20230923190544059](https://raw.githubusercontent.com/wuaixx/photo/master/img/image-20230923190544059.png)



 

## 4.3 配置springboot+mybatis项目

 

### 4.3.1 配置pom.xml

### ![](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230922_162754.png)

![屏幕截图_20230922_164619](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230922_164619.png)

![屏幕截图_20230922_164619](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230922_164638.png)

![屏幕截图_20230922_164651](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230922_164651.png)

![屏幕截图_20230922_164658](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230922_164658.png)

### 4.3.2在src/main/resources下添加application.yml配置文件

![屏幕截图_20230922_164944](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230922_164944.png)

## 4.4 测试

 

### 4.4.1、在src/main/java下创建com包

### ![image-20230922165213068](https://raw.githubusercontent.com/wuaixx/photo/master/img/image-20230922165213068.png)

 

### **4.4.2、在com包下创建springboot启动引导java文件**

![屏幕截图_20230922_165302](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230922_165302.png)



### **4.4.3**、在springboot启动类所在的包的子包下创建controller类

![屏幕截图_20230922_165936](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230922_165936.png)

# 5 springboot的静态资源

**这里的静态资源主要是html、js、css和图片等。**

 

## 5.1 静态资源存放

 

**springboot**的静态资源是放在src/main/resources/static文件夹下，可以在static文件夹下创建多级子文件夹，用来存放静态资源。

![屏幕截图_20230924_185438](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230924_185438-16955532345721.png)

## 5.2 直接访问静态资源

 

**访问的时候，路径从static开始（不包括static文件夹），例如，在static文件夹下有一个pages文件夹，pages文件夹中有一个index.html，那么访问路径就是“ip:port/上下文/pages/index.html”，这是直接访问静态资源。**

## 5.3 controller跳转前端页面

 

如果想要通过controller跳转到html页面，那么需要在application.yml文件中配置html文件的前缀（html所属文件夹）和后缀（.html）

![屏幕截图_20230922_170618](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230922_170618.png)

## 5.4 idea实时刷新前端代码

 

**1**、“File” -> “Settings” -> “Build,Execution,Deplyment” -> “Compiler”，选中打勾 “Build project automatically” 。**

![clipboard.png](https://raw.githubusercontent.com/wuaixx/photo/master/img/clip_image002.gif)

 

**2**、开启compiler.automake.allow.when.app.running**

**“File” -> “Settings” -> “Advanced Settings”** **，勾选下图所示选项**

![clipboard.png](https://raw.githubusercontent.com/wuaixx/photo/master/img/clip_image004.gif)

 

# 6 jQuery

 

**前端页面部分也有逻辑需要编写代码，这里使用jQuery。在需要使用jQuery的页面引入jQuery即可。**

 

## 6.1 页面中引用jQuery

 

**示例，我这里是在src/main/webapp下创建js文件夹，把jquery-3.4.1.js拷贝到js文件夹，在src/main/webapp/index.html中引用jquery-3.4.1.js。**

![image-20230924190103570](https://raw.githubusercontent.com/wuaixx/photo/master/img/image-20230924190103570.png)

**引用代码如下。**

```
<head>

    <meta charset="UTF-8">

  <title>Title</title>

    <script type="text/javascript" src="./js/jquery-3.4.1.js"></script>

</head>

 
```



## 6.2 具体教程

**jQuery有很多在线文档**

**以菜鸟教程的jQuery为例。地址**[**https://www.runoob.com/jquery/jquery-tutorial.html**](https://www.runoob.com/jquery/jquery-tutorial.html) 

**这里内容很多，我们暂时只关注参考手册的内容即可。**

 

# 7 根据AdminLTE模板构建管理类系统的静态页模板

 

## 7.1 AdminLTE

 

**我们使用的模板是AdminLTE，基于boostrap和jQuery开发的，其中包含大量前端组件，我们可以根据需要灵活组合使用。**

**AdminLTE****模板组件在“在线考试系统/资料/管理系统前端html模板.zip”，解压，进入解压文件夹，鼠标双击index.html，就可以看到各种组件。**

![clipboard.png](https://raw.githubusercontent.com/wuaixx/photo/master/img/clip_image012.gif)

 

**AdminLTE****模板页面的基本结构是“左、上、下”页面三分的结构，这种结构是目前绝大多数管理类系统的页面结构。**

**以下是AdminLTE模板页面的“左、上、下”页面三分的结构与代码的对应。**

![clipboard.png](https://raw.githubusercontent.com/wuaixx/photo/master/img/clip_image014.gif)

 

 

## 7.2 构建管理类系统的静态页模板

 

**管理类系统的页面类型大概有以下几类：**

1、登录页（大多数的管理类系统都没有注册页，需要通过用户管理模块增加用户）。

2、欢迎页，登录成功后进入的首页。

3、列表页，展示数据集合的表格，一般带分页和查询功能，展示的每行数据的最后会有可以点击的“修改”和“删除”功能。

4、新增/修改页，一个form表单，同一个的功能模块的新增/修改页的表单元素是一致的，只是修改页需要回填数据。

5、其他特殊页，例如在线答题页、数据统计页、文件上传页等等，这些在管理类系统中的占比很小。

 

### 7.2.1 登录页

 

**根据“pages\examples”中的register.html构建登录页**

 

![clipboard.png](https://raw.githubusercontent.com/wuaixx/photo/master/img/clip_image016.gif)

 

### 7.2.2 页面主体构建

 

**从AdminLTE的index.html中，拆出“左、上、下”主体结构，只要结构，其中具体的代码删除。**

 

### 7.2.3 左侧菜单

 

**我们这里，菜单等组件是作为单独的html文件存在，主页面需要对于菜单等组件进行加载，这里是使用jQuery动态加载html页面**

**左侧菜单代码在AdminLTE模板的多数页面中都有。**

![clipboard.png](https://raw.githubusercontent.com/wuaixx/photo/master/img/clip_image018.gif)

 

**菜单的主体部分看下图对应的代码。**

![clipboard.png](https://raw.githubusercontent.com/wuaixx/photo/master/img/clip_image020.gif)

 

**最终构建的左侧菜单为下图所示。**

![clipboard.png](https://raw.githubusercontent.com/wuaixx/photo/master/img/clip_image022.gif)

![屏幕截图_20230924_190409](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230924_190409.png)

 

### 7.2.4 右侧欢迎页

 

**用日历作为欢迎页的右侧主体部分**

![clipboard.png](https://raw.githubusercontent.com/wuaixx/photo/master/img/clip_image024.gif)

 ![屏幕截图_20230924_190448](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230924_190448.png)

 

### 7.2.5 新增/修改数据页模板

 

![clipboard.png](https://raw.githubusercontent.com/wuaixx/photo/master/img/clip_image026.gif)

 ![屏幕截图_20230924_190448](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230924_190448-16955535765762.png)

### 7.2.6 数据列表页模板

 

![clipboard.png](E:\前端学习\实训报告.assets\clip_image028.gif)

 ![屏幕截图_20230924_190651](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230924_190651.png)

 

### 7.2.7 考试页模板

 

**考试页需要有倒计时和交卷按钮，倒计时和交卷按钮悬浮在页面上，倒计时结束后交卷按钮失效，变为不可点击状态。**

**悬浮框代码代码见“/pages/calendar.html”中的悬浮部分。**

**复选框、单选钮部分代码见“pages/forms/advanced.html”。**

**倒计时js核心代码，详见“在线考试系统（servlet-html-jetty）IEDA版\资料”《倒计时js代码.txt》**

 

![clipboard.png](E:\前端学习\实训报告.assets\clip_image030.gif)

 ![屏幕截图_20230924_190655](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230924_190655.png)

 

 

# 8 表设计

 

## 8.1 表关系

![clipboard.png](https://raw.githubusercontent.com/wuaixx/photo/master/img/clip_image032.gif)

 

 

## 8.2 表结构

 

| **用户表**         |              |                  |
| ------------------ | ------------ | ---------------- |
| **user**           |              |                  |
| **字段**           | **中文**     | **数据类型**     |
| **id**             | **主键**     | **自增int(11)**  |
| **username**       | **用户名**   | **varchar(255)** |
| **password**       | **密码**     | **varchar(255)** |
| **real_name**      | **姓名**     | **varchar(255)** |
| **sex**            | **性别**     | **varchar(255)** |
| **sno**            | **学号**     | **varchar(255)** |
| **admission_date** | **入学时间** | **datetime**     |
| **faculty_id**     | **院系id**   | **int(2)**       |
| **major_id**       | **专业id**   | **int(5)**       |
| **class_id**       | **班级id**   | **int(5)**       |

 ![屏幕截图_20230924_190903](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230924_190903.png)

| **角色表**    |              |                  |
| ------------- | ------------ | ---------------- |
| **role**      |              |                  |
| **字段**      | **中文**     | **数据类型**     |
| **id**        | **主键**     | **自增int(2)**   |
| **role_code** | **角色编码** | **varchar(50)**  |
| **role_name** | **角色中文** | **varchar(255)** |

 ![屏幕截图_20230924_190925](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230924_190925.png)

| **用户与角色关联表** |            |              |
| -------------------- | ---------- | ------------ |
| **user_role**        |            |              |
| **字段**             | **中文**   | **数据类型** |
| **user_id**          | **用户id** | **int(10)**  |
| **role_id**          | **角色id** | **int(2)**   |

![屏幕截图_20230924_191623](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230924_191623.png)

| **菜单表**     |              |                  |
| -------------- | ------------ | ---------------- |
| **menu**       |              |                  |
| **字段**       | **中文**     | **数据类型**     |
| **id**         | **主键**     | **自增int(2)**   |
| **menu_code**  | **菜单编码** | **varchar(50)**  |
| **menu_name**  | **菜单中文** | **varchar(255)** |
| **menu_url**   | **菜单url**  | **varchar(255)** |
| **menu_level** | **菜单级别** | **varchar(255)** |
| **parent_id**  | **父菜单id** | **int(5)**       |
| **sort**       | **排序**     | **int(5)**       |

  ![屏幕截图_20230924_190940](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230924_190940.png)

| **角色与菜单关联表** |            |              |
| -------------------- | ---------- | ------------ |
| **role_menu**        |            |              |
| **字段**             | **中文**   | **数据类型** |
| **role_id**          | **角色id** | **int(2)**   |
| **menu_id**          | **菜单id** | **int(2)**   |

![屏幕截图_20230924_190954](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230924_190954-16955542989786.png)

| **院系表**       |              |                 |
| ---------------- | ------------ | --------------- |
| **faculty**      |              |                 |
| **字段**         | **中文**     | **数据类型**    |
| **id**           | **主键**     | **自增int(2)**  |
| **faculty_name** | **院系名称** | **varchar(50)** |

 ![屏幕截图_20230924_191027](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230924_191027.png)

| **专业表**     |              |                 |
| -------------- | ------------ | --------------- |
| **major**      |              |                 |
| **字段**       | **中文**     | **数据类型**    |
| **id**         | **主键**     | **自增int(5)**  |
| **faculty_id** | **院系id**   | **int(2)**      |
| **major_name** | **专业名称** | **varchar(50)** |

 ![屏幕截图_20230924_191035](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230924_191035.png)

| **班级表**     |              |                 |
| -------------- | ------------ | --------------- |
| **class**      |              |                 |
| **字段**       | **中文**     | **数据类型**    |
| **id**         | **主键**     | **自增int(5)**  |
| **faculty_id** | **院系id**   | **int(2)**      |
| **major_id**   | **专业id**   | **int(5)**      |
| **class_name** | **班级名称** | **varchar(50)** |

 ![屏幕截图_20230924_191046](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230924_191046.png)

| **科目表**       |              |                 |
| ---------------- | ------------ | --------------- |
| **subject**      |              |                 |
| **字段**         | **中文**     | **数据类型**    |
| **id**           | **主键**     | **自增int(5)**  |
| **subject_name** | **科目名称** | **varchar(50)** |

 ![屏幕截图_20230924_191120](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230924_191120.png)

| **专业学期表**     |                          |                |
| ------------------ | ------------------------ | -------------- |
| **major_semester** |                          |                |
| **字段**           | **中文**                 | **数据类型**   |
| **id**             | **主键**                 | **自增int(5)** |
| **major_id**       | **专业id**               | **int(5)**     |
| **school_year**    | **学年，1、2、3…**       | **int(2)**     |
| **semester**       | **学期，上学期0下学期1** | **int(1)**     |

 ![屏幕截图_20230924_191138](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230924_191138.png)

| **专业学期科目表**         |                |              |
| -------------------------- | -------------- | ------------ |
| **major_semester_subject** |                |              |
| **字段**                   | **中文**       | **数据类型** |
| **major_semester_id**      | **专业学期id** | **int(5)**   |
| **subject_id**             | **科目id**     | **int(5)**   |

 ![屏幕截图_20230924_191146](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230924_191146.png)

| **题库表**        |                          |                  |
| ----------------- | ------------------------ | ---------------- |
| **question_bank** |                          |                  |
| **字段**          | **中文**                 | **数据类型**     |
| **id**            | **主键**                 | **自增int(11)**  |
| **subject_id**    | **科目id**               | **int(5)**       |
| **question_code** | **考题编码**             | **varchar(255)** |
| **question_name** | **题目**                 | **varchar(255)** |
| **type**          | **类型，0单选1多选**     | **int(1)**       |
| **difficulty**    | **难度，0易1中2难3很难** | **int(1)**       |
| **answer**        | **答案**                 | **varchar(50)**  |
| **create_time**   | **入库时间**             | **datetime**     |

 ![屏幕截图_20230924_191202](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230924_191202.png)

| **题库选项表**       |              |                  |
| -------------------- | ------------ | ---------------- |
| **question_options** |              |                  |
| **字段**             | **中文**     | **数据类型**     |
| **id**               | **主键**     | **自增int(11)**  |
| **question_code**    | **考题编码** | **varchar(255)** |
| **options_text**     | **选项内容** | **varchar(255)** |
| **options_code**     | **选项编码** | **varchar(10)**  |

 ![屏幕截图_20230924_191214](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230924_191214.png)

| **考题模板表**                     |                                   |                 |
| ---------------------------------- | --------------------------------- | --------------- |
| **question_template**              |                                   |                 |
| **字段**                           | **中文**                          | **数据类型**    |
| **id**                             | **主键**                          | **自增int(11)** |
| **template_name**                  | **模板名称**                      | **varchar(50)** |
| **major_id**                       | **专业id**                        | **int(5)**      |
| **subject_id**                     | **科目id**                        | **int(5)**      |
| **single_num**                     | **单选题数目**                    | **int(3)**      |
| **single_score**                   | **单选题分值**                    | **int(2)**      |
| **single_difficulty_proportion**   | **单选题难度比例，易:中:难:很难** | **varchar(10)** |
| **multiple_num**                   | **多选题数目**                    | **int(3)**      |
| **multiple_score**                 | **多选题分值**                    | **int(2)**      |
| **multiple_difficulty_proportion** | **多选题难度比例，易:中:难:很难** | **varchar(10)** |
| **aggregate_score**                | **总分**                          | **int(3)**      |

 ![屏幕截图_20230924_191229](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230924_191229.png)

| **用户答题表**           |                      |                  |
| ------------------------ | -------------------- | ---------------- |
| **examination_question** |                      |                  |
| **字段**                 | **中文**             | **数据类型**     |
| **id**                   | **主键**             | **自增int(11)**  |
| **user_id**              | **用户id**           | **int(11)**      |
| **subject_id**           | **科目id**           | **int(5)**       |
| **question_name**        | **题目**             | **varchar(255)** |
| **answer**               | **答案**             | **varchar(50)**  |
| **correct**              | **是否正确，0否1是** | **int(1)**       |

 ![屏幕截图_20230924_191249](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230924_191249.png)

| **用户成绩表** |              |                 |
| -------------- | ------------ | --------------- |
| **score**      |              |                 |
| **字段**       | **中文**     | **数据类型**    |
| **id**         | **主键**     | **自增int(11)** |
| **user_id**    | **用户id**   | **int(11)**     |
| **subject_id** | **科目id**   | **int(5)**      |
| **score**      | **分数**     | **int(3)**      |
| **answer**     | **答题时间** | **datetime**    |

![屏幕截图_20230924_191301](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230924_191301.png)

# 9 MyBatis逆向工程

**使用MyBatis根据数据库的表生成对应的实体类、mapper接口和mapper的xml文件。**

 

## **1**、创建一个新的数据库账户，只给这个账户指需要逆向工程的数据库的读的权限，用来完成逆向工程。

### 添加用户信息

![屏幕截图_20230922_171223](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230922_171223.png)

### 授权

![屏幕截图_20230922_171340](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230922_171340.png)

## **2**、添加依赖

**先放开之前的注释，除了我们已经添加的mybatis的依赖之外，我们需要再添加mybatis-generator-core的依赖**

![屏幕截图_20230922_171448](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230922_171448.png)

## **3**、编写逆向工程的配置文件generatorConfig.xml

![屏幕截图_20230922_171613](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230922_171613.png)

![屏幕截图_20230922_171621](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230922_171621.png)

![屏幕截图_20230922_171629](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230922_171629.png)

## **4**、编写逆向工程的java类

![屏幕截图_20230922_172802](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230922_172802.png)

## **5**、运行Generator类的main方法生成实体类、mapper接口和mapper的xml文件

![屏幕截图_20230922_180135](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230922_180135.png)

![屏幕截图_20230922_180141](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230922_180141.png)

# 10.springboot项目中使用MyBatis

## 1.三层架构

**1**、什么是三层？

UI(表现层): 主要是指与用户直接交互的部分。用于接收用户输入的数据和显示处理后用户需要的数据。

 

BLL:(业务逻辑层): UI层和DAL层之间的桥梁。实现业务逻辑。业务逻辑具体包含：验证、计算、业务规则等等。

 

DAL:(数据访问层): 与数据库打交道。主要实现对数据的增、删、改、查。将存储在数据库中的数据提交给业务层，同时将业务层处理的数据保存到数据库。（当然这些操作都是基于UI层的。用户的需求反映给界面（UI），UI反映给BLL，BLL反映给DAL，DAL进行数据的操作，操作后再一一返回，直到将用户所需数据反馈给用户）

![image-20230924192207684](https://raw.githubusercontent.com/wuaixx/photo/master/img/image-20230924192207684.png)

**2、为什么使用三层架构**

**代码解耦。**

**便于开发和维护，发生在哪一层的变化，只需更改该层，不需要更改整个系统。层次清晰，分工明确，每层之间耦合度低——提高了效率，适应需求变化，可维护性高，可扩展性高**

 

**3、根据三层架构划分代码**

![image-20230924192242443](https://raw.githubusercontent.com/wuaixx/photo/master/img/image-20230924192242443.png)

**三层架构是一种架构思想，目的是代码的解耦，不是说前端就必须是使用html+js，后端必须使用java、Python、PHP等等这些。假设一个项目完全使用js开发，也是可以按照三层架构思想完成分层，划分出controller、service、dao这些。**

**4、本项目中三层结构的应用**

**1）前端，html+css+js。**

**2）controller，接收请求和响应，使用springboot的controller。**

**3）service，业务逻辑处理，面向接口编程（解耦）。**

**4）dao，操作数据库，使用MyBatis框架，mapper接口+xml。**

## 2.登录

### 2.1准备工作

**1、pom.xml配置**

```xml
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <!-- 引入springboot的父工程 -->
    <parent>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-starter-parent</artifactId>
        <version>2.6.2</version>
        <relativePath/> <!-- lookup parent from repository -->
    </parent>

    <groupId>com.shixun.skd.xg19</groupId>
    <artifactId>emis</artifactId>
    <version>1.0-SNAPSHOT</version>

    <!-- 配置信息 -->
    <properties>
        <!-- java的jdk版本 -->
        <java.version>1.8</java.version>
    </properties>

    <!-- 所有的依赖，指定需要加载的第三方jar包以及它的版本 -->
    <dependencies>
        <!-- springboot的web模块，接收请求和响应请求 -->
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-web</artifactId>
        </dependency>

        <!-- mybatis与springboot整合依赖 -->
        <dependency>
            <groupId>org.mybatis.spring.boot</groupId>
            <artifactId>mybatis-spring-boot-starter</artifactId>
            <version>2.2.1</version>
        </dependency>

        <!-- mysql驱动 -->
        <dependency>
            <groupId>mysql</groupId>
            <artifactId>mysql-connector-java</artifactId>
            <scope>runtime</scope>
            <version>5.1.32</version>
        </dependency>

        <!-- mybatis逆向工程依赖 -->
        <dependency>
            <groupId>org.mybatis.generator</groupId>
            <artifactId>mybatis-generator-core</artifactId>
            <version>1.4.0</version>
        </dependency>

        <!-- 数据库连接池 -->
        <dependency>
            <groupId>com.alibaba</groupId>
            <artifactId>druid</artifactId>
            <version>1.1.23</version>
        </dependency>



        <!-- json 相关工具类 -->
        <dependency>
            <groupId>com.alibaba</groupId>
            <artifactId>fastjson</artifactId>
            <version>1.2.73</version>
        </dependency>

        <!-- poi解析Excel文件的依赖 -->
        <dependency>
            <groupId>org.apache.poi</groupId>
            <artifactId>poi</artifactId>
            <version>3.14</version>
        </dependency>
        <dependency>
            <groupId>org.apache.poi</groupId>
            <artifactId>poi-ooxml</artifactId>
            <version>3.14</version>
        </dependency>
    </dependencies>

    <build>
        <defaultGoal>compile</defaultGoal>
        <!--
        springboot项目启动时，默认过滤掉src/main/java下的所有xml文件
        我们要使用mybatis，mybatis的xml文件在mapper包下，mapper在src/main/java下
        需要通过以下配置，指定pringboot项目启动时，不过滤src/main/java下的所有xml文件
        -->
        <resources>
            <resource>
                <directory>src/main/java</directory>
                <includes>
                    <include>**/*.xml</include>
                </includes>
                <filtering>false</filtering>
            </resource>
        </resources>
    </build>

</project>
```

**2、application.yml配置**

![屏幕截图_20230924_192450](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230924_192450.png)

## 3.实现

### 3.1前端实现

#### 3.1.1.页面

![屏幕截图_20230922_180736](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230922_180736.png)

#### 3.1.2.js

使用jQuery获取输入框的值（包含前端校验），使用ajax向controller发起登录请求，根据响应数据判断登录是否成功，如果成功跳转到index页面，如果失败提示“用户名密码错误！”并且停留在登录页面。

![屏幕截图_20230922_180848](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230922_180848.png)

![屏幕截图_20230922_180854](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230922_180854.png)

#### 3.1.3.实现dao

**我们使用MyBatis框架，逆向工程已经生成数据库表对应的Entity、mapper接口和xml映射文件。**

![屏幕截图_20230922_181019](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230922_181019.png)

在UserMapper.xml文件中，添加查询配置

![屏幕截图_20230922_181139](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230922_181139.png)

#### 3.1.4.service实现

编写UserService接口

![屏幕截图_20230922_181416](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230922_181416.png)

编写实现类UserServiceImpl，类上加@Service注解，依赖注入UserMapper属性

![屏幕截图_20230923_163223](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230923_163223.png)

#### 3.1.5.controller的实现

![屏幕截图_20230922_181519](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230922_181519.png)

## 4.页面

![屏幕截图_20230922_181942](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230922_181942.png)

![屏幕截图_20230922_182005](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230922_182005.png)

![屏幕截图_20230922_182028](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230922_182028.png)

登录成功跳转页面

![屏幕截图_20230922_182050](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230922_182050.png)

# 11.功能实现

## 1.菜单管理

### 1.1.新增菜单

1、菜单总共2级，页面需要做选择菜单级别的下拉列表。

2、当选择菜单级别为二级菜单时，需要显示一级菜单下拉列表（下拉选项从数据库查询），此处需要下拉列表联动处理。

![屏幕截图_20230923_170250](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230923_170250.png)

### 1.2.菜单列表

![屏幕截图_20230923_170948](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230923_170948.png)

#### 1.2.1.前端部分

**1、html页面中必须有以下代码，这个div就是列表加载的div**

 ```html
<div id="jsGrid1"></div>
 ```

2.编写js

![屏幕截图_20230923_171230](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230923_171230.png)

![屏幕截图_20230923_171250](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230923_171250.png)

#### 1.2.2.后端部分

##### 1.2.2.1.实现dao

mapper实现

![屏幕截图_20230923_171710](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230923_171710.png)

mapper.xml添加配置

![屏幕截图_20230923_172110](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230923_172110.png)

##### 1.2.2.2.实现service

![屏幕截图_20230923_172743](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230923_172743.png)

![屏幕截图_20230923_172852](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230923_172852.png)

##### 1.2.2.3.实现control

![屏幕截图_20230923_172935](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230923_172935.png)

### 1.3.菜单删除

**1、与菜单新增共用页面，在新增页添加一个隐藏域，用来存放被修改菜单的id值。**

 ![屏幕截图_20230923_173633](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230923_173633.png)

**2、在菜单加载的时候判断隐藏域有没有值，有值就是修改页，没有值就是新增页。**

 ![屏幕截图_20230923_173815](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230923_173815.png)

**3、是修改页的时候，ajax请求，根据菜单id查询数据，回填到表单元素中。其中注意回填父菜单，判断被修改的菜单的是不是二级菜单，如果是二级菜单，需要给父菜单的下拉列表加载所有的一级菜单选项，并且设置被修改的菜单的原一级菜单的选项是选中的。**

 ![屏幕截图_20230923_173858](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230923_173858.png)

**4、提交修改到controller，与add基本一致，这里要注意需要把菜单的id值作为参数传递。**

![屏幕截图_20230923_174039](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230923_174039.png)

## 2.角色管理

### 2.1新增角色

![屏幕截图_20230923_174410](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230923_174410.png)

**新增角色功能与新增菜单差不多，其中有些特殊处理：**

**给角色关联菜单，一个角色是可以关联多个菜单的，菜单本身也有层级关系（父子菜单结构），这个在页面展示选择菜单的时候，使用Tree结构更合适。**

 

**Tree结构的实现方式很多，我们这里使用zTree来实现。**

**新增角色，需要新增角色本身以及角色菜单关联表，要保证两个写的操作同时成功，否则就全部失败，这就需要使用数据库事务来实现。**

 

**数据库事务( transaction)是访问并可能操作各种数据项的一个数据库操作序列，这些操作要么全部执行,要么全部不执行，是一个不可分割的工作单位。事务由事务开始与事务结束之间执行的全部数据库操作组成。**

**关键代码**

**1**、ztree的js和css放到项目中

![屏幕截图_20230923_174818](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230923_174818.png)

**2**、role-add.html页面引入ztree的js和css

![屏幕截图_20230923_175116](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230923_175116.png)

![屏幕截图_20230923_175111](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230923_175111.png)

**3、role-add.html页面，去掉下拉列表部分，增加以下代码**

![屏幕截图_20230923_175232](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230923_175232.png)

**4、role-add.js中新增以下代码**

```js
$(function(){

  $.ajax({

    type: "POST",

    url: "/emis/menu/tree.do",

    dataType: "json",

    success: function(data){

      loadMenuTree(data);

    }

  });

});

var loadMenuTree = function(zNodes){

  var zTreeObj;

  var setting = {

    view: {

      selectedMulti: true,

      showIcon: true,

      showLine: true,

      showTitle: true,

    },

    data: {

      simpleData: {

        enable: true,

        idKey: "id",

        pIdKey: "parentId",

        rootPId: "0"

      },

      key: {

        name: "menuName"

      }

    },

    check: {

      enable: true

    }

  };

  zTreeObj = $.fn.zTree.init($("#menuTree"), setting, zNodes);

}

var getCheckedMenuIds = function(){

  var treeObj = $.fn.zTree.getZTreeObj("menuTree");

  var nodes = treeObj.getCheckedNodes(true);

  var ids = "";

  $.each(nodes, function(index, node){

    ids += "," + node.id;

  });

  ids = ids.substring(1, ids.length);

  return ids;

}
```

**5、role-add.js中的roleadd方法，添加如下代码**

```
var ids = getCheckedMenuIds();
$("#menuIds").val(ids)
```

**6、后端在新增角色菜单关联表时，需要使用新增角色的主键id，这个可以在mybatis的xml中的insert标签配置以下属性，就可以把id值赋值到实参对象的id属性上。**

![屏幕截图_20230923_180532](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230923_180532.png)

### 2.2.角色列表

![屏幕截图_20230923_180733](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230923_180733.png)

无特殊处理，仿照菜单列表实现

### 2.3.**删除角色**

**删除角色需要同时删除角色表和角色菜单关联表的数据，service方法设置事务。**

### 2.4.修改角色

**1、数据回填到页面时，需要查询角色下属的菜单id，设置菜单ztree节点选中，js关键代码如下。**

![屏幕截图_20230923_181444](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230923_181444.png)

**2、提交数据到后台，在修改角色时，数据库操作如下。**

**1）修改角色表数据**

**2）删除角色对应的角色菜单关联表数据，新增角色菜单关联表数据**

## 3.用户管理

### 3.1.新增用户

![屏幕截图_20230923_181948](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230923_181948.png)

**根据新增菜单实现，特殊部分如下。**

**1、页面部分表单除了用户本身数据，还有角色数据。我们这里只考虑用户和角色一对一关联，ajax加载一个角色的下拉列表即可。**

![屏幕截图_20230923_183240](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230923_183240.png)

**2、后台除了保存用户本身数据，还要保存用户角色关联数据，一个事务中完成。**

![屏幕截图_20230923_183513](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230923_183513.png)

 **前端：**

![屏幕截图_20230923_182135](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230923_182135-16954645707351.png)

![屏幕截图_20230923_182141](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230923_182141.png)

![屏幕截图_20230923_182200](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230923_182200.png)

![屏幕截图_20230923_182207](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230923_182207.png)

![屏幕截图_20230923_182212](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230923_182212.png)

![屏幕截图_20230923_182225](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230923_182225.png)

### 3.2.用户列表

![屏幕截图_20230923_182615](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230923_182615.png)

根据角色列表完成即可，后台SQL的查询条件是按照用户名查询即可

![屏幕截图_20230923_182650](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230923_182650.png)

![屏幕截图_20230923_182706](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230923_182706.png)

![屏幕截图_20230923_182712](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230923_182712.png)

![屏幕截图_20230923_182717](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230923_182717.png)

###  3.3.修改用户

 

**1、回填表单数据时，除了回填用户本身数据，还要设置角色下拉列表的选项的选中。**

**2、后台保存修改用户的数据和保存修改角色类似，需要完成3个操作，在一个事务中。**

**1）保存用户数据本身。**

**2）根据根据用户id删除用户角色关联表数据。**

**3）新增用户角色关联表数据。**

![屏幕截图_20230923_183744](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230923_183744-16954655177682.png)



###   3.4.删除用户

**需要完成2个操作，在一个事务中。**

**1、删除用户数据。**

**2、根据根据用户id删除用户角色关联表数据。**

![屏幕截图_20230923_183916](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230923_183916.png)

![屏幕截图_20230923_184122](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230923_184122.png)



## 5.题库管理

### 5.1上传题库

#### 5.1.1前端

![屏幕截图_20230924_205445](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230924_205445.png)

![屏幕截图_20230924_205451](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230924_205451.png)

![屏幕截图_20230924_205603](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230924_205603.png)

#### 5.1.2后端

pom的依赖

![屏幕截图_20230924_205737](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230924_205737.png)

**poi解析Excel**

![屏幕截图_20230924_205838](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230924_205838.png)

![屏幕截图_20230924_205843](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230924_205843.png)

![屏幕截图_20230924_205848](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230924_205848.png)

![屏幕截图_20230924_210415](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230924_210415.png)

![屏幕截图_20230924_210558](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230924_210558.png)

## 6.院系管理

### 6.1.新建院系

![屏幕截图_20230923_184122](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230923_184122-16954657333813.png)

**前端：**

```html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>AdminLTE 3 | Project Add</title>

  <!-- Google Font: Source Sans Pro -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="../plugins/fontawesome-free/css/all.min.css">
  <!-- Theme style -->
  <link rel="stylesheet" href="../dist/css/adminlte.min.css">
</head>
<body class="hold-transition sidebar-mini">
<!-- Site wrapper -->

  <!-- Navbar -->

  <!-- /.navbar -->

  <!-- Main Sidebar Container -->


  <!-- Content Wrapper. Contains page content -->

    <!-- Content Header (Page header) -->
    <section class="content-header">
      <div class="container-fluid">
        <div class="row mb-2">
          <div class="col-sm-6">

          </div>
          <div class="col-sm-6">
            <ol class="breadcrumb float-sm-right">
              <li class="breadcrumb-item"><a href="#">Home</a></li>
              <li class="breadcrumb-item active"id="my-title">新增院系</li>
            </ol>
          </div>
        </div>
      </div><!-- /.container-fluid -->
    </section>

    <!-- Main content -->
    <section class="content">
      <div class="row">
        <div class="col-md-2"></div>
        <div class="col-md-8">
          <div class="card card-primary">
            <div class="card-header">
              <h3 class="card-title"></h3>

              <div class="card-tools">
                <button type="button" class="btn btn-tool" data-card-widget="collapse" title="Collapse">
                  <i class="fas fa-minus"></i>
                </button>
              </div>
            </div>
            <!--
             type="hidden"时候，是隐藏域，在代码中存在，但是不会在浏览器展示
             -->
              <input type="hidden" id="objId">
            <div class="card-body">
              <div class="form-group">
                <label for="facultyName">院系名称</label>
                <input type="text" id="facultyName" class="form-control">
              </div>
            </div>
            <!-- /.card-body -->
          </div>
          <!-- /.card -->
        </div>
        <div class="col-md-2"></div>

      </div>
      <div class="row">
        <div class="col-md-2"></div>
        <div class="col-md-8">
          <a href="#" class="btn btn-secondary">清空</a>
          <input type="button" value="提交" class="btn btn-success float-right" onclick="subForm()">
        </div>

        <div class="col-md-2"></div>
      </div>
    </section>
    <!-- /.content -->

  <!-- /.content-wrapper -->



  <!-- Control Sidebar -->
  <!-- /.control-sidebar -->

<!-- ./wrapper -->

<!-- jQuery -->
<script src="../plugins/jquery/jquery.min.js"></script>
<!-- Bootstrap 4 -->
<script src="../plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
<!-- AdminLTE App -->
<script src="../dist/js/adminlte.min.js"></script>
<!-- AdminLTE for demo purposes -->
<script src="../dist/js/demo.js"></script>
<script src="../js/faculty-add.js"></script>
</body>
</html>

```



###  6.2.院系列表

![屏幕截图_20230923_184830](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230923_184830.png)

**前端：**

```html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>AdminLTE 3 | jsGrid</title>

  <!-- Google Font: Source Sans Pro -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="../plugins/fontawesome-free/css/all.min.css">
  <!-- jsGrid -->
  <link rel="stylesheet" href="../plugins/jsgrid/jsgrid.min.css">
  <link rel="stylesheet" href="../plugins/jsgrid/jsgrid-theme.min.css">
  <!-- Theme style -->
  <link rel="stylesheet" href="../dist/css/adminlte.min.css">
</head>
<body class="hold-transition sidebar-mini">

  <!-- Navbar -->

  <!-- /.navbar -->

  <!-- Main Sidebar Container -->


  <!-- Content Wrapper. Contains page content -->

    <!-- Content Header (Page header) -->
    <section class="content-header">
      <div class="container-fluid">
        <div class="row mb-2">
          <div class="col-sm-6">

          </div>
          <div class="col-sm-6">
            <ol class="breadcrumb float-sm-right">
              <li class="breadcrumb-item"><a href="#">Home</a></li>
              <li class="breadcrumb-item active">院系列表</li>
            </ol>
          </div>
        </div>
      </div><!-- /.container-fluid -->
    </section>

    <!-- Main content -->
    <section class="content">
      <div class="card">
        <div class="card-header">
          <!-- 这里放一个查询框 -->
            <div class="input-group">
                <input type="search" id="search" class="form-control form-control-lg" placeholder="请输入院系名">
                <div class="input-group-append">
                    <button type="button" class="btn btn-lg btn-default" onclick="createTable()">
                        <i class="fa fa-search"></i>
                    </button>
                </div>
            </div>
        </div>
        <!-- /.card-header -->
        <div class="card-body">
          <div id="jsGrid1"></div>
        </div>
        <!-- /.card-body -->
      </div>
      <!-- /.card -->
    </section>
    <!-- /.content -->

  <!-- /.content-wrapper -->


  <!-- Control Sidebar -->

  <!-- /.control-sidebar -->

<!-- ./wrapper -->

<!-- jQuery -->
<script src="../plugins/jquery/jquery.min.js"></script>
<!-- Bootstrap 4 -->
<script src="../plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
<!-- jsGrid -->
<script src="../plugins/jsgrid/demos/db.js"></script>
<script src="../plugins/jsgrid/jsgrid.min.js"></script>
<!-- AdminLTE App -->
<script src="../dist/js/adminlte.min.js"></script>
<!-- AdminLTE for demo purposes -->
<script src="../dist/js/demo.js"></script>
<script src="../js/faculty-list.js"></script>
<!-- Page specific script -->
<script>

</script>
</body>
</html>
```



###  6.3.修改和删除院系

  ![屏幕截图_20230923_185043](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230923_185043.png)

![屏幕截图_20230923_185216](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230923_185216.png)

![屏幕截图_20230923_185223](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230923_185223.png)

![屏幕截图_20230923_185230](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230923_185230.png)

 js

![屏幕截图_20230923_185356](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230923_185356.png)

![屏幕截图_20230923_185400](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230923_185400.png)

##  7.专业管理

###  7.1新建专业

![屏幕截图_20230923_184851](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230923_184851.png)

**前端：**

```html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>AdminLTE 3 | Project Add</title>

  <!-- Google Font: Source Sans Pro -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="../plugins/fontawesome-free/css/all.min.css">
  <!-- Theme style -->
  <link rel="stylesheet" href="../dist/css/adminlte.min.css">
</head>
<body class="hold-transition sidebar-mini">
<!-- Site wrapper -->

  <!-- Navbar -->

  <!-- /.navbar -->

  <!-- Main Sidebar Container -->


  <!-- Content Wrapper. Contains page content -->

    <!-- Content Header (Page header) -->
    <section class="content-header">
      <div class="container-fluid">
        <div class="row mb-2">
          <div class="col-sm-6">

          </div>
          <div class="col-sm-6">
            <ol class="breadcrumb float-sm-right">
              <li class="breadcrumb-item"><a href="#">Home</a></li>
              <li class="breadcrumb-item active"id="my-title">新增专业</li>
            </ol>
          </div>
        </div>
      </div><!-- /.container-fluid -->
    </section>

    <!-- Main content -->
    <section class="content">
      <div class="row">
        <div class="col-md-2"></div>
        <div class="col-md-8">
          <div class="card card-primary">
            <div class="card-header">
              <h3 class="card-title"></h3>

              <div class="card-tools">
                <button type="button" class="btn btn-tool" data-card-widget="collapse" title="Collapse">
                  <i class="fas fa-minus"></i>
                </button>
              </div>
            </div>
              <input type="hidden" id="objId">
            <div class="card-body">
                <!-- 页面加载的时候，自动加载院系下拉列表 -->
                <div class="form-group">
                    <label for="facultyId">院系</label>
                    <select id="facultyId" class="form-control custom-select">

                    </select>
                </div>

              <div class="form-group">
                <label for="majorName">专业名称</label>
                <input type="text" id="majorName" class="form-control">
              </div>
            </div>
            <!-- /.card-body -->
          </div>
          <!-- /.card -->
        </div>
        <div class="col-md-2"></div>

      </div>
      <div class="row">
        <div class="col-md-2"></div>
        <div class="col-md-8">
          <a href="#" class="btn btn-secondary">清空</a>
          <input type="button" value="提交" class="btn btn-success float-right" onclick="subForm()">
        </div>

        <div class="col-md-2"></div>
      </div>
    </section>
    <!-- /.content -->

  <!-- /.content-wrapper -->



  <!-- Control Sidebar -->
  <!-- /.control-sidebar -->

<!-- ./wrapper -->

<!-- jQuery -->
<script src="../plugins/jquery/jquery.min.js"></script>
<!-- Bootstrap 4 -->
<script src="../plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
<!-- AdminLTE App -->
<script src="../dist/js/adminlte.min.js"></script>
<!-- AdminLTE for demo purposes -->
<script src="../dist/js/demo.js"></script>
<script src="../js/major-add.js"></script>
</body>
</html>

```



###  7.2专业列表

![屏幕截图_20230923_184908](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230923_184908.png)

```html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>AdminLTE 3 | jsGrid</title>

  <!-- Google Font: Source Sans Pro -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="../plugins/fontawesome-free/css/all.min.css">
  <!-- jsGrid -->
  <link rel="stylesheet" href="../plugins/jsgrid/jsgrid.min.css">
  <link rel="stylesheet" href="../plugins/jsgrid/jsgrid-theme.min.css">
  <!-- Theme style -->
  <link rel="stylesheet" href="../dist/css/adminlte.min.css">
</head>
<body class="hold-transition sidebar-mini">

  <!-- Navbar -->

  <!-- /.navbar -->

  <!-- Main Sidebar Container -->


  <!-- Content Wrapper. Contains page content -->

    <!-- Content Header (Page header) -->
    <section class="content-header">
      <div class="container-fluid">
        <div class="row mb-2">
          <div class="col-sm-6">

          </div>
          <div class="col-sm-6">
            <ol class="breadcrumb float-sm-right">
              <li class="breadcrumb-item"><a href="#">Home</a></li>
              <li class="breadcrumb-item active">专业列表</li>
            </ol>
          </div>
        </div>
      </div><!-- /.container-fluid -->
    </section>

    <!-- Main content -->
    <section class="content">
      <div class="card">
        <div class="card-header">
          <!-- 这里放一个查询框 -->
            <div class="input-group">
                <input type="search" id="search" class="form-control form-control-lg" placeholder="请输入专业名">
                <div class="input-group-append">
                    <button type="button" class="btn btn-lg btn-default" onclick="createTable()">
                        <i class="fa fa-search"></i>
                    </button>
                </div>
            </div>
        </div>
        <!-- /.card-header -->
        <div class="card-body">
          <div id="jsGrid1"></div>
        </div>
        <!-- /.card-body -->
      </div>
      <!-- /.card -->
    </section>
    <!-- /.content -->

  <!-- /.content-wrapper -->


  <!-- Control Sidebar -->

  <!-- /.control-sidebar -->

<!-- ./wrapper -->

<!-- jQuery -->
<script src="../plugins/jquery/jquery.min.js"></script>
<!-- Bootstrap 4 -->
<script src="../plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
<!-- jsGrid -->
<script src="../plugins/jsgrid/demos/db.js"></script>
<script src="../plugins/jsgrid/jsgrid.min.js"></script>
<!-- AdminLTE App -->
<script src="../dist/js/adminlte.min.js"></script>
<!-- AdminLTE for demo purposes -->
<script src="../dist/js/demo.js"></script>
<script src="../js/major-list.js"></script>
<!-- Page specific script -->
<script>

</script>
</body>
</html>
```

###  7.3修改删除专业

![屏幕截图_20230924_211059](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230924_211059.png)

![屏幕截图_20230924_211252](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230924_211252.png)

![屏幕截图_20230924_211256](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230924_211256.png)

![屏幕截图_20230924_211346](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230924_211346.png)

![屏幕截图_20230924_211349](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230924_211349.png)

![屏幕截图_20230924_211358](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230924_211358.png)

##  8.班级管理

 

###  新增班级

![屏幕截图_20230923_184929](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230923_184929.png)

```html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>AdminLTE 3 | Project Add</title>

  <!-- Google Font: Source Sans Pro -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="../plugins/fontawesome-free/css/all.min.css">
  <!-- Theme style -->
  <link rel="stylesheet" href="../dist/css/adminlte.min.css">
</head>
<body class="hold-transition sidebar-mini">
<!-- Site wrapper -->

  <!-- Navbar -->

  <!-- /.navbar -->

  <!-- Main Sidebar Container -->


  <!-- Content Wrapper. Contains page content -->

    <!-- Content Header (Page header) -->
    <section class="content-header">
      <div class="container-fluid">
        <div class="row mb-2">
          <div class="col-sm-6">

          </div>
          <div class="col-sm-6">
            <ol class="breadcrumb float-sm-right">
              <li class="breadcrumb-item"><a href="#">Home</a></li>
              <li class="breadcrumb-item active"id="my-title">新增班级</li>
            </ol>
          </div>
        </div>
      </div><!-- /.container-fluid -->
    </section>

    <!-- Main content -->
    <section class="content">
      <div class="row">
        <div class="col-md-2"></div>
        <div class="col-md-8">
          <div class="card card-primary">
            <div class="card-header">
              <h3 class="card-title"></h3>

              <div class="card-tools">
                <button type="button" class="btn btn-tool" data-card-widget="collapse" title="Collapse">
                  <i class="fas fa-minus"></i>
                </button>
              </div>
            </div>
              <input type="hidden" id="objId">
            <div class="card-body">
                <!-- 页面加载的时候，自动加载院系下拉列表 -->
                <div class="form-group">
                    <label for="facultyId">院系</label>
                    <select id="facultyId" class="form-control custom-select" onchange="createMajor()">

                    </select>
                </div>

                <!-- 专业下拉列表，院系下拉列表选项选中改变的时候（facultyId的onchange事件），去加载专业下拉列表 -->
                <div class="form-group">
                    <label for="majorId">专业</label>
                    <select id="majorId" class="form-control custom-select">

                    </select>
                </div>

              <div class="form-group">
                <label for="className">班级名称</label>
                <input type="text" id="className" class="form-control">
              </div>
            </div>
            <!-- /.card-body -->
          </div>
          <!-- /.card -->
        </div>
        <div class="col-md-2"></div>

      </div>
        <div class="row">
            <div class="col-md-2"></div>
            <div class="col-md-8">
                <a href="#" class="btn btn-secondary">清空</a>
                <input type="button" value="提交" class="btn btn-success float-right" onclick="subForm()">
            </div>

            <div class="col-md-2"></div>
        </div>
    </section>
    <!-- /.content -->

  <!-- /.content-wrapper -->



  <!-- Control Sidebar -->
  <!-- /.control-sidebar -->

<!-- ./wrapper -->

<!-- jQuery -->
<script src="../plugins/jquery/jquery.min.js"></script>
<!-- Bootstrap 4 -->
<script src="../plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
<!-- AdminLTE App -->
<script src="../dist/js/adminlte.min.js"></script>
<!-- AdminLTE for demo purposes -->
<script src="../dist/js/demo.js"></script>
<script src="../js/class-add.js"></script>
</body>
</html>

```



###  班级列表

![屏幕截图_20230923_184954](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230923_184954.png)

```html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>AdminLTE 3 | jsGrid</title>

  <!-- Google Font: Source Sans Pro -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="../plugins/fontawesome-free/css/all.min.css">
  <!-- jsGrid -->
  <link rel="stylesheet" href="../plugins/jsgrid/jsgrid.min.css">
  <link rel="stylesheet" href="../plugins/jsgrid/jsgrid-theme.min.css">
  <!-- Theme style -->
  <link rel="stylesheet" href="../dist/css/adminlte.min.css">
</head>
<body class="hold-transition sidebar-mini">

  <!-- Navbar -->

  <!-- /.navbar -->

  <!-- Main Sidebar Container -->


  <!-- Content Wrapper. Contains page content -->

    <!-- Content Header (Page header) -->
    <section class="content-header">
      <div class="container-fluid">
        <div class="row mb-2">
          <div class="col-sm-6">

          </div>
          <div class="col-sm-6">
            <ol class="breadcrumb float-sm-right">
              <li class="breadcrumb-item"><a href="#">Home</a></li>
              <li class="breadcrumb-item active">班级列表</li>
            </ol>
          </div>
        </div>
      </div><!-- /.container-fluid -->
    </section>

    <!-- Main content -->
    <section class="content">
      <div class="card">
        <div class="card-header">
          <!-- 这里放一个查询框 -->
            <div class="input-group">
                <input type="search" id="search" class="form-control form-control-lg" placeholder="请输入班级名">
                <div class="input-group-append">
                    <button type="button" class="btn btn-lg btn-default" onclick="createTable()">
                        <i class="fa fa-search"></i>
                    </button>
                </div>
            </div>
        </div>
        <!-- /.card-header -->
        <div class="card-body">
          <div id="jsGrid1"></div>
        </div>
        <!-- /.card-body -->
      </div>
      <!-- /.card -->
    </section>
    <!-- /.content -->

  <!-- /.content-wrapper -->


  <!-- Control Sidebar -->

  <!-- /.control-sidebar -->

<!-- ./wrapper -->

<!-- jQuery -->
<script src="../plugins/jquery/jquery.min.js"></script>
<!-- Bootstrap 4 -->
<script src="../plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
<!-- jsGrid -->
<script src="../plugins/jsgrid/demos/db.js"></script>
<script src="../plugins/jsgrid/jsgrid.min.js"></script>
<!-- AdminLTE App -->
<script src="../dist/js/adminlte.min.js"></script>
<!-- AdminLTE for demo purposes -->
<script src="../dist/js/demo.js"></script>
<script src="../js/class-list.js"></script>
<!-- Page specific script -->
<script>

</script>
</body>
</html>
```

###  修改和删除班级



mapper

![屏幕截图_20230923_190250](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230923_190250.png)



js

![屏幕截图_20230923_190134](https://raw.githubusercontent.com/wuaixx/photo/master/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE_20230923_190134.png)

